(this.webpackJsonppangaea=this.webpackJsonppangaea||[]).push([[0],{149:function(e,t,c){},225:function(e,t,c){"use strict";c.r(t);var n,r,i=c(0),a=c.n(i),s=c(34),o=c.n(s),d=(c(149),c(104)),l=c(62),j=c(105),u=c(66),b=c(247),O=c(4),h=function(e){return Object(O.jsxs)("header",{className:"header__container",children:[Object(O.jsxs)("div",{className:"header__inner header__left",children:[Object(O.jsx)("p",{id:"header__title",children:"Lumin"}),Object(O.jsxs)("div",{className:"header__inner nav",children:[Object(O.jsx)("p",{children:"Shop"}),Object(O.jsx)("p",{children:"Learn"})]})]}),Object(O.jsxs)("div",{className:"header__inner header__right",children:[Object(O.jsx)("span",{id:"account__label",children:"Account"}),Object(O.jsxs)("div",{id:"account__cart",children:[Object(O.jsx)(b.a,{id:"cart",onClick:function(){return e.openDrawerCart()}}),0!==e.noOfItemInCart&&Object(O.jsx)("p",{id:"account__cart__no",children:e.noOfItemInCart})]})]})]})},m=function(e){return Object(O.jsx)("div",{className:"contentHeader__container",children:Object(O.jsxs)("div",{className:"contentHeader__container__inner",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{id:"contentHeader__container__inner_title",children:"All Products"}),Object(O.jsx)("span",{children:"A 360 look at Lumin"})]}),Object(O.jsx)("div",{children:e.component})]})})},p=function(e){return Object(O.jsxs)("div",{className:"productItem__item","data-testid":"Product-Item",children:[Object(O.jsx)("div",{className:"img__container",children:Object(O.jsx)("img",{src:e.content.image_url,alt:"image_url",loading:"lazy"})}),Object(O.jsx)("p",{className:"title",children:e.content.title}),Object(O.jsxs)("span",{children:["From"," ",e.content.price.toLocaleString("en-US",{style:"currency",currency:e.selectedCurrency})]}),Object(O.jsx)("button",{onClick:function(){return e.addProductToCart(e.content)},className:"btn__addCart",children:"Add to Cart"})]},e.content.id)},x=function(e){var t=e.productArr,c=e.addProductToCart,n=e.selectedCurrency;return Object(O.jsx)("section",{className:"productItem__container",children:t&&t.products.map((function(e){return Object(O.jsx)(p,{content:e,selectedCurrency:n,addProductToCart:c},e.id)}))})},f=c(239),_=c(246),y=c(248),C=f.a.Option,v=function(e){var t=e.component,c=e.onCloseDrawer,n=e.openCart,r=e.cartList,i=e.selectedCurrency,a=e.totalAmount,s=e.countriesCode,o=e.onSelectedCurrency;return Object(O.jsxs)(_.a,{title:"",placement:"right",closable:!1,onClose:c,visible:n,children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("header",{children:[Object(O.jsx)("p",{className:"cart_header_text",children:"My Shopping Cart"}),Object(O.jsxs)("div",{className:"cart_header",children:[Object(O.jsx)(y.a,{onClick:c}),Object(O.jsx)(f.a,{defaultValue:i,className:"cart-select-currency",onChange:function(e){return o(e)},children:s&&s.map((function(e,t){return Object(O.jsx)(C,{value:e,children:e},t)}))})]})]}),Object(O.jsx)("div",{className:"cart-list-container",children:t})]}),0!==r.length&&Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"checkout-btn",children:[Object(O.jsx)("p",{children:"Subtotal"}),Object(O.jsx)("span",{children:a.toLocaleString("en-US",{style:"currency",currency:i})})]}),Object(O.jsx)("button",{type:"button",size:"large",id:"checkout",children:"Proceed to checkout"})]})]})},g=c(243),N=c(95),S=c(249),I=c(250),w=function(e){var t=e.item,c=e.data,n=e.selectedCurrency,r=e.removeItemFromCart,i=e.increaseItemQuantity,a=e.reduceItemFromCart;return Object(O.jsxs)("div",{className:"cart-list-item",children:[Object(O.jsx)("div",{className:"content",children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"cart-item-desc",children:[Object(O.jsx)("h4",{className:"title",children:t.title}),Object(O.jsx)("span",{onClick:r,children:Object(O.jsx)(N.a,{})})]}),Object(O.jsxs)("div",{className:"cart-item-desc",children:[Object(O.jsx)("p",{children:"Two month supply shipped every two months"}),Object(O.jsx)("div",{id:"cart-item-img",children:Object(O.jsx)("img",{src:t.image_url,alt:"product_img"})})]})]})}),Object(O.jsxs)("div",{className:"action",children:[i&&Object(O.jsxs)("div",{className:"btn-actions",children:[Object(O.jsx)(g.a,{icon:Object(O.jsx)(S.a,{}),className:"btn-mr btn-noBorder",onClick:function(){i(t,1)}}),Object(O.jsx)("p",{children:t.quantity}),Object(O.jsx)(g.a,{icon:Object(O.jsx)(I.a,{}),className:"btn-ml btn-noBorder",onClick:function(){a(t)}})]}),Object(O.jsx)("span",{children:c&&c.products?t.price.toLocaleString("en-US",{style:"currency",currency:n}):t.price})]})]})},q=f.a.Option,k=function(e){return Object(O.jsx)(f.a,{placeholder:"Filter by",className:"contentHeader__container__inner__filter",showSearch:!0,optionFilterProp:"children",onChange:function(t){return e.onSelectedCurrency(t,"selectedCurrency")},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:e.countriesCode&&e.countriesCode.map((function(e,t){return Object(O.jsx)(q,{value:e,"data-testid":"filterSelect",children:e},t)}))})},P=c(65),L=c.n(P),F=c(233),A=c(241),T=c(74),D=c(244),$=c(245),z=function(){var e=Object(i.useState)(!1),t=Object(u.a)(e,2),c=t[0],a=t[1],s=Object(i.useState)([]),o=Object(u.a)(s,2),b=o[0],p=o[1],f=Object(i.useState)("USD"),_=Object(u.a)(f,2),y=_[0],C=_[1],g=Object(i.useState)(""),N=Object(u.a)(g,2),S=N[0],I=N[1],q=Object(i.useState)(0),P=Object(u.a)(q,2),z=P[0],B=P[1],H=Object(D.a)(n||(n=Object(j.a)(["\n  query Products {\n    products {\n      id\n      title\n      image_url\n      price(currency: ",")\n    }\n  }\n"])),y),U=Object(D.a)(r||(r=Object(j.a)(["\n    query Currency {\n      currency\n    }\n  "]))),E=Object($.a)(H),J=E.loading,M=E.error,Q=E.data,V=Object($.a)(U);console.log(V);var G=Object(i.useCallback)((function(){for(var e=0,t=0;t<b.length;t++)e+=b[t].price;return e}),[b]);Object(i.useEffect)((function(){if(0!==b.length&&void 0!==Q){for(var e,t=0;t<Q.products.length;t++)for(var c=Q.products[t],n=0;n<b.length;n++)b[n].id===c.id&&(b[n].price=b[n].quantity*c.price,e=c.price);I(e),B(G())}}),[y,Q,b,G]),Object(i.useEffect)((function(){B(G())}),[G]);var K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0!==b.filter((function(t){return t.id===e.id})).length){var c=b.findIndex((function(t){return t.id===e.id}));p(L()(b,Object(l.a)({},c,{$merge:{quantity:b[c].quantity+t,price:(b[c].quantity+t)*S}})))}else{var n=1,r=Object(d.a)(Object(d.a)({},e),{},{quantity:n});p(L()(b,{$push:[r]})),S!==e.price&&I(e.price)}a(!0)},R=function(e){var t=b.findIndex((function(t){return t.id===e.id}));p(L()(b,{$splice:[[t,1]]}))},W=function(e){var t=b.findIndex((function(t){return t.id===e.id}));1===b[t].quantity?p(L()(b,Object(l.a)({$splice:[[t,1]]},t,{price:{$set:(b[t].quantity-1)*S}}))):p(L()(b,Object(l.a)({},t,{$merge:{quantity:b[t].quantity-1,price:(b[t].quantity-1)*S}})))},X=function(e){C(e)};return Object(O.jsxs)("div",{children:[Object(O.jsx)(h,{openDrawerCart:function(){a(!0)},noOfItemInCart:b.length}),Object(O.jsxs)("section",{className:"content",children:[Object(O.jsx)(m,{selectedCurrency:y,component:Object(O.jsx)(k,{countriesCode:V&&void 0!==V.data&&V.data.currency,onSelectedCurrency:X})}),Object(O.jsx)("div",{className:"product__container",children:J?Object(O.jsx)("div",{className:"spinner",children:Object(O.jsx)(F.a,{size:"small","data-testid":"spinner",indicator:Object(O.jsx)(T.a,{style:{fontSize:24,color:"#00A3A1"},spin:!0})})}):M?Object(O.jsx)(A.a,{status:"500",title:"500",subTitle:"Sorry, something went wrong."}):Object(O.jsx)(x,{productArr:Q,selectedCurrency:y,addProductToCart:K})})]}),Object(O.jsx)(v,{onCloseDrawer:function(){a(!1)},openCart:c,cartList:b,selectedCurrency:y,totalAmount:z,countriesCode:V&&void 0!==V.data&&V.data.currency,onSelectedCurrency:X,component:b.map((function(e){return Object(O.jsx)(w,{item:e,data:Q,selectedCurrency:y,removeItemFromCart:R,increaseItemQuantity:K,reduceItemFromCart:W},e.id)}))})]})},B=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,252)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),i(e),a(e)}))},H=c(238),U=c(139),E=c(240),J=c(242),M=Object(U.a)({uri:"https://pangaea-interviews.now.sh/api/graphql"}),Q=new E.a({link:M,cache:new J.a,defaultOptions:{query:{errorPolicy:"all"},mutate:{errorPolicy:"all"}}});o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(H.a,{client:Q,children:Object(O.jsx)(z,{})})}),document.getElementById("root")),B()}},[[225,1,2]]]);
//# sourceMappingURL=main.25031981.chunk.js.map